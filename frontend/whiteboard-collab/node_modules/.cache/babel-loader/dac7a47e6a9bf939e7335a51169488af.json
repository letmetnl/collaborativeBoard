{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\reliance\\\\Desktop\\\\react-projects\\\\collaborate-on-board\\\\frontend\\\\whiteboard-collab\\\\src\\\\components\\\\board\\\\Board.jsx\";\nimport React from \"react\";\nimport io from \"socket.io-client\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.socket = io.connect(\"http://localhost:5000\");\n    this.isDrawing = false;\n    this.socket.on(\"canvas-data\", function (data) {\n      var root = this;\n      var interval = setInterval(function () {\n        if (root.isDrawing) return;\n        root.isDrawing = true;\n        clearInterval(interval);\n        var image = new Image();\n        var canvas = document.querySelector(\"#board\");\n        var ctx = canvas.getContext(\"2d\");\n\n        image.onload = function () {\n          ctx.drawImage(image, 0, 0);\n          root.isDrawing = false;\n        };\n\n        image.src = data;\n      }, 200);\n    });\n  }\n\n  componentDidMount() {\n    this.drawOnCanvas();\n  }\n\n  componentWillReceiveProps(newProps) {\n    this.ctx.strokeStyle = newProps.color;\n    this.ctx.lineWidth = newProps.size;\n  }\n\n  drawOnCanvas() {\n    var canvas = document.querySelector(\"#board\");\n    this.ctx = canvas.getContext(\"2d\");\n    var ctx = this.ctx;\n    var sketch = document.querySelector(\"#sketch\");\n    var sketch_style = getComputedStyle(sketch);\n    canvas.width = parseInt(sketch_style.getPropertyValue(\"width\"));\n    canvas.height = parseInt(sketch_style.getPropertyValue(\"height\"));\n    var mouse = {\n      x: 0,\n      y: 0\n    };\n    var last_mouse = {\n      x: 0,\n      y: 0\n    };\n    /* Mouse Capturing Work */\n\n    canvas.addEventListener(\"mousemove\", function (e) {\n      last_mouse.x = mouse.x;\n      last_mouse.y = mouse.y;\n      mouse.x = e.pageX - this.offsetLeft;\n      mouse.y = e.pageY - this.offsetTop;\n    }, false);\n    /* Drawing on Paint App */\n\n    ctx.lineWidth = this.props.size;\n    ctx.lineJoin = \"round\";\n    ctx.lineCap = \"round\";\n    ctx.strokeStyle = this.props.color;\n    canvas.addEventListener(\"mousedown\", function (e) {\n      canvas.addEventListener(\"mousemove\", onPaint, false);\n    }, false);\n    canvas.addEventListener(\"mouseup\", function () {\n      canvas.removeEventListener(\"mousemove\", onPaint, false);\n    }, false);\n    var root = this;\n\n    var onPaint = function () {\n      ctx.beginPath();\n      ctx.moveTo(last_mouse.x, last_mouse.y);\n      ctx.lineTo(mouse.x, mouse.y);\n      ctx.closePath();\n      ctx.stroke();\n      if (root.timeout != undefined) clearTimeout(root.timeout);\n      root.timeout = setTimeout(function () {\n        var base64ImageData = canvas.toDataURL(\"image/png\");\n        root.socket.emit(\"canvas-data\", base64ImageData);\n      }, 1000);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"sketch\",\n      id: \"sketch\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        className: \"board\",\n        id: \"board\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Board;","map":{"version":3,"sources":["C:/Users/reliance/Desktop/react-projects/collaborate-on-board/frontend/whiteboard-collab/src/components/board/Board.jsx"],"names":["React","io","Board","Component","constructor","props","socket","connect","isDrawing","on","data","root","interval","setInterval","clearInterval","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","componentDidMount","drawOnCanvas","componentWillReceiveProps","newProps","strokeStyle","color","lineWidth","size","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","height","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","beginPath","moveTo","lineTo","closePath","stroke","timeout","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","emit","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport io from \"socket.io-client\";\r\n\r\nimport \"./style.css\";\r\n\r\nclass Board extends React.Component {\r\n  timeout;\r\n  socket = io.connect(\"http://localhost:5000\");\r\n\r\n  ctx;\r\n  isDrawing = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.socket.on(\"canvas-data\", function (data) {\r\n      var root = this;\r\n      var interval = setInterval(function () {\r\n        if (root.isDrawing) return;\r\n        root.isDrawing = true;\r\n        clearInterval(interval);\r\n        var image = new Image();\r\n        var canvas = document.querySelector(\"#board\");\r\n        var ctx = canvas.getContext(\"2d\");\r\n        image.onload = function () {\r\n          ctx.drawImage(image, 0, 0);\r\n\r\n          root.isDrawing = false;\r\n        };\r\n        image.src = data;\r\n      }, 200);\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.drawOnCanvas();\r\n  }\r\n\r\n  componentWillReceiveProps(newProps) {\r\n    this.ctx.strokeStyle = newProps.color;\r\n    this.ctx.lineWidth = newProps.size;\r\n  }\r\n\r\n  drawOnCanvas() {\r\n    var canvas = document.querySelector(\"#board\");\r\n    this.ctx = canvas.getContext(\"2d\");\r\n    var ctx = this.ctx;\r\n\r\n    var sketch = document.querySelector(\"#sketch\");\r\n    var sketch_style = getComputedStyle(sketch);\r\n    canvas.width = parseInt(sketch_style.getPropertyValue(\"width\"));\r\n    canvas.height = parseInt(sketch_style.getPropertyValue(\"height\"));\r\n\r\n    var mouse = { x: 0, y: 0 };\r\n    var last_mouse = { x: 0, y: 0 };\r\n\r\n    /* Mouse Capturing Work */\r\n    canvas.addEventListener(\r\n      \"mousemove\",\r\n      function (e) {\r\n        last_mouse.x = mouse.x;\r\n        last_mouse.y = mouse.y;\r\n\r\n        mouse.x = e.pageX - this.offsetLeft;\r\n        mouse.y = e.pageY - this.offsetTop;\r\n      },\r\n      false\r\n    );\r\n\r\n    /* Drawing on Paint App */\r\n    ctx.lineWidth = this.props.size;\r\n    ctx.lineJoin = \"round\";\r\n    ctx.lineCap = \"round\";\r\n    ctx.strokeStyle = this.props.color;\r\n\r\n    canvas.addEventListener(\r\n      \"mousedown\",\r\n      function (e) {\r\n        canvas.addEventListener(\"mousemove\", onPaint, false);\r\n      },\r\n      false\r\n    );\r\n\r\n    canvas.addEventListener(\r\n      \"mouseup\",\r\n      function () {\r\n        canvas.removeEventListener(\"mousemove\", onPaint, false);\r\n      },\r\n      false\r\n    );\r\n\r\n    var root = this;\r\n    var onPaint = function () {\r\n      ctx.beginPath();\r\n      ctx.moveTo(last_mouse.x, last_mouse.y);\r\n      ctx.lineTo(mouse.x, mouse.y);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n\r\n      if (root.timeout != undefined) clearTimeout(root.timeout);\r\n      root.timeout = setTimeout(function () {\r\n        var base64ImageData = canvas.toDataURL(\"image/png\");\r\n        root.socket.emit(\"canvas-data\", base64ImageData);\r\n      }, 1000);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"sketch\" id=\"sketch\">\r\n        <canvas className=\"board\" id=\"board\"></canvas>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Board;\r\n"]},"metadata":{},"sourceType":"module"}